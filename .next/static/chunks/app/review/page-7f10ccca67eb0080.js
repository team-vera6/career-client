(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{27252:function(e,t,s){Promise.resolve().then(s.bind(s,15449))},71863:function(e,t,s){"use strict";s.d(t,{i0:function(){return l},kV:function(){return i},lJ:function(){return n}});var r=s(18775);let n=async e=>await (0,r.GZ)("/highlights/".concat(e)),i=async e=>await (0,r.GZ)("/lowlights/".concat(e)),l=async e=>await (0,r.GZ)("/reviews/".concat(e))},22369:function(e,t,s){"use strict";s.d(t,{B:function(){return n},t:function(){return i}});var r=s(18775);let n=async(e,t)=>await (0,r.vx)("/highlights/".concat(e),t),i=async(e,t)=>await (0,r.vx)("/lowlights/".concat(e),t)},42988:function(e,t,s){"use strict";s.d(t,{a:function(){return n}});var r=s(18775);let n=async e=>await (0,r.GZ)("/todos",{params:{ids:e.join(",")}})},30108:function(e,t,s){"use strict";s.d(t,{y:function(){return a}});var r=s(47586),n=e=>{let{size:t=20,stroke:s="#999CA1",fill:n="none",...i}=e;return(0,r.jsxs)("svg",{width:t,height:t,viewBox:"0 0 20 21",fill:n,xmlns:"http://www.w3.org/2000/svg",...i,children:[(0,r.jsx)("circle",{cx:"10",cy:"10.3711",r:"8.25",fill:"white",stroke:s,strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M7 7.37109L13 13.3711M13 7.37109L7 13.3711",stroke:s,strokeWidth:"1.5",strokeLinecap:"round"})]})},i=s(43110),l=s(39390),o=s(41778);let a=e=>{var t;let{id:s,content:a,project:c,editable:d=!1,onClickDelete:u}=e;return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"p-3 border border-line-assistive rounded-lg bg-surface-foreground font-body-14 text-text-strong",children:a}),(null==c?void 0:c.id)?(0,r.jsxs)("div",{className:(0,o.cn)("flex",!d&&"cursor-pointer"),onClick:()=>!d&&window.open("/project?project=".concat(c.id)),children:[(0,r.jsx)(i.Z,{size:36}),(0,r.jsxs)("div",{className:"w-[calc(100%-2.2rem)] flex items-center justify-between gap-2 py-1.5 pl-3 pr-2 mt-2 border border-line-normal rounded-lg bg-surface-foregroundOn relative",children:[(0,r.jsx)("p",{className:"truncate font-body-14 text-text-strong",children:null==c?void 0:c.content}),(0,r.jsx)(l.Z,{percentage:null!==(t=null==c?void 0:c.progressRate)&&void 0!==t?t:0}),d&&(0,r.jsx)("button",{className:"absolute -right-2.5",onClick:()=>null==u?void 0:u(Number(s)),children:(0,r.jsx)(n,{})})]})]}):null]})}},15449:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eW}});var r=s(47586),n=s(80890),i=s(28823),l=s(53173);let o=()=>{let e=(0,n.b9)(l.DP),t=(0,n.b9)(l.DQ),s=(0,n.b9)(l.pj),r=(0,n.b9)(l.cd),i=(0,n.b9)(l.c6),o=(0,n.b9)(l.yX),a=(0,n.b9)(l.Ct),c=(0,n.b9)(l.GR),d=(0,n.b9)(l.bA),u=(0,n.b9)(l.gV),h=(0,n.b9)(l.y9),x=(0,n.b9)(l.zs),g=(0,n.b9)(l.jI),p=(0,n.b9)(l.r3),m=(0,n.b9)(l.vS),b=(0,n.b9)(l.P$),f=(0,n.b9)(l.Y7);return()=>{e(0),t(0),s(1),r(l.aH),i(l.aH),o([]),a([]),c([]),d([]),u([]),h([]),x([l.AS]),g([l.AS]),p([]),m([]),b([]),f([])}};var a=s(41778),c=s(18775);let d=async e=>{let{year:t,month:s,week:r}=e;return await (0,c.bN)("/todos",{params:{year:t,month:s,week:r}})},u=async e=>{let{year:t,month:s,week:r}=e;return await (0,c.bN)("/highlights",{params:{year:t,month:s,week:r}})},h=async e=>{let{year:t,month:s,week:r}=e;return await (0,c.bN)("/lowlights",{params:{year:t,month:s,week:r}})},x=async e=>{let{year:t,month:s,week:r}=e;return await (0,c.bN)("/reviews",{params:{year:t,month:s,week:r}})},g=async e=>await (0,c.QQ)("/reviews",e),p=async e=>await (0,c.QQ)("/highlights",e),m=async e=>await (0,c.QQ)("/lowlights",e),b=[1,2,3,4,5,6,7];var f=e=>{let{score:t,setScore:s}=e,[n,l]=(0,i.useState)(t);return(0,i.useEffect)(()=>{l(t)},[t]),(0,r.jsx)("div",{className:"flex items-center gap-2",onMouseLeave:()=>l(t),children:b.map(e=>(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(v,{active:n>=e,onHover:()=>l(e),onClick:()=>{l(e),s(e)}}),7!==e&&(0,r.jsx)(j,{active:n>e})]},e))})};let v=e=>{let{active:t=!1,onClick:s,onHover:n}=e;return(0,r.jsx)("div",{className:"cursor-pointer",onClick:s,onMouseOver:n,children:t?(0,r.jsx)("div",{className:"w-9 h-9 rounded-full border border-text-primary bg-surface-foreground flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-4 h-4 rounded-full bg-text-primary"})}):(0,r.jsx)("div",{className:"border border-text-assistive bg-surface-foreground rounded-full w-9 h-9 flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-text-assistive"})})})},j=e=>{let{active:t=!1}=e;return(0,r.jsxs)("div",{className:"flex gap-[3px]",children:[(0,r.jsx)("div",{className:(0,a.cn)("w-0.5 h-2 rounded-sm",t?"bg-text-primary":"bg-text-assistive")}),(0,r.jsx)("div",{className:(0,a.cn)("w-0.5 h-2 rounded-sm",t?"bg-text-primary":"bg-text-assistive")}),(0,r.jsx)("div",{className:(0,a.cn)("w-0.5 h-2 rounded-sm",t?"bg-text-primary":"bg-text-assistive")})]})};var w=s(52138);let{year:y,month:k,week:N}=(0,w._y)(),C=()=>{let e=(0,n.b9)(l.cd),t=(0,n.b9)(l.c6),[s,o]=(0,n.KO)(l.DP),[a,c]=(0,n.KO)(l.DQ);(0,i.useEffect)(()=>{(async()=>{try{let t=await x({year:y,month:k,week:N});t&&(c(t.id),o(t.like),e(e=>({...e,step1:!!t.id})))}catch(t){e(e=>({...e,step1:!1}))}})()},[e,c,o]);let d=async s=>{if(o(s),e(e=>({...e,step1:!0})),t(e=>({...e,step1:!1})),!a)try{let e=await g({weekNumber:{year:y,month:k,week:N},like:s});c(e.id)}catch(e){console.log(e)}};return(0,r.jsx)(f,{score:s,setScore:e=>d(e)})},L=()=>{let e=(0,n.Dv)(l.c6);return(0,r.jsxs)("div",{className:"py-9 bg-surface-foreground rounded-2xl flex items-center justify-center flex-col",children:[(0,r.jsxs)("div",{className:"w-[26.25rem] flex justify-between mb-4 font-title-14 text-text-strong ",children:[(0,r.jsx)("p",{children:"아쉬워요"}),(0,r.jsx)("p",{children:"만족해요"})]}),(0,r.jsx)(C,{}),e.step1&&(0,r.jsx)("p",{className:"w-[26.25rem] mt-1 flex justify-start font-body-12 text-state-negative",children:"만족도를 체크해 주세요."})]})},S=async e=>await (0,c.f9)("/reviews",e);var E=s(42988);let Z=async e=>await (0,c.QQ)("/todos",e),D=async e=>await (0,c.vx)("/todos",e);var O=s(29335);let M=()=>{let e=(0,n.Dv)(l.yX),t=(0,n.Dv)(l.Ct),s=(0,n.Dv)(l.GR),r=(0,n.Dv)(l.bA),i=e=>e.map(e=>e.id),o=(e,t)=>e.filter(e=>!t.includes(e)),a=[...i(e),...i(t)],c=[...i(s),...i(r)],d=o(c,a),u=a.filter(e=>c.includes(e)),h=o(a,c),x=s.filter(e=>d.includes(e.id)),g=r.filter(e=>d.includes(e.id)),p=s.filter(e=>u.includes(e.id));return{postCurrentTodos:x,postNextTodos:g,putCurrentTodos:p,putNextTodos:r.filter(e=>u.includes(e.id)),deleteCurrentTodos:e.filter(e=>h.includes(e.id)),deleteNextTodos:t.filter(e=>h.includes(e.id))}},{year:R,month:_,week:z}=(0,w._y)(),{nextYear:T,nextMonth:I,nextWeek:K}=(0,w.eQ)(),Q={year:R,month:_,week:z},G={year:T,month:I,week:K},F=()=>{let e=(0,n.Dv)(l.DQ),t=(0,n.Dv)(l.DP),[s,o]=(0,n.KO)(l.cd),c=(0,n.b9)(l.pj),d=(0,n.b9)(l.c6),{addToast:u}=(0,O.Z)(),{postCurrentTodos:h,postNextTodos:x,putCurrentTodos:g,putNextTodos:p,deleteCurrentTodos:m,deleteNextTodos:b}=M(),f=async()=>{if(!s.step1){d(e=>({...e,step1:!0}));return}let r=h.map(e=>({content:e.todo})),n=x.map(e=>({content:e.todo})),i=g.map(e=>({id:e.id,content:e.todo,status:e.isChecked?"DONE":"ONGOING"})),l=p.map(e=>({id:e.id,content:e.todo,status:e.isChecked?"DONE":"ONGOING"})),o=m.map(e=>String(e.id)),a=b.map(e=>String(e.id));try{let s=await Promise.all([S({id:null!=e?e:0,like:t}),Z({weekNumber:Q,contents:r}),Z({weekNumber:G,contents:n}),D(i),D(l),(0,E.a)(o),(0,E.a)(a)]);return c(2),s}catch(e){u({iconType:"error",message:"다시 시도해 주세요."})}};return(0,i.useEffect)(()=>{e&&o(e=>({...e,step1:!0}))},[e,o]),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"button",className:(0,a.cn)("button-primary button-large",!s.step1&&"bg-button-disabled text-text-neutral hover:bg-button-disabled"),onClick:f,children:"다음"})})};var W=s(57882),A=s(86241),P=s(107);let B=e=>{let{category:t}=e,{addToast:s}=(0,O.Z)(),o=(0,n.b9)(l.GR),c=(0,n.b9)(l.bA),[d,u]=(0,n.KO)(l.zs),[h,x]=(0,n.KO)(l.jI),[g,p]=(0,i.useState)(!1),m="currentTodo"===t||"nextTodo"===t,b=e=>{let t=e.slice(0,-4);switch(e){case"currentTodo":o(e=>[...e,{id:-Math.abs((0,P.x)()),week:t,isChecked:!1,todo:""}]);break;case"nextTodo":c(e=>[...e,{id:-Math.abs((0,P.x)()),week:t,isChecked:!1,todo:""}]);break;case"highLight":if(d.length>=3)s({iconType:"error",message:"Beta 버전에서는 최대 3개까지 작성할 수 있어요."});else{let e={id:"highlight-".concat((0,P.x)()),content:"",project:{id:"",content:"",progressRate:0}};u(t=>[...t,e])}break;case"lowLight":if(h.length>=3)s({iconType:"error",message:"Beta 버전에서는 최대 3개까지 작성할 수 있어요."});else{let e={id:"lowlight-".concat((0,P.x)()),content:"",project:{id:"",content:"",progressRate:0}};x(t=>[...t,e])}}},f=(0,i.useMemo)(()=>"highLight"===t?d.length>=3:"lowLight"===t&&h.length>=3,[t,d.length,h.length]);return(0,r.jsxs)("button",{className:(0,a.cn)("button-small",m?"button-text text-center":"button-line hover:bg-surface-blank hover:opacity-100",g?"text-text-neutral":"text-text-strong",f&&"bg-surface-blank text-text-neutral"),onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:()=>b(t),children:[m?(0,r.jsx)(W.Z,{size:20,stroke:A.Z.text.normal}):(0,r.jsx)("div",{className:"h-5 w-5 flex items-center justify-center",children:(0,r.jsx)(W.Z,{size:15,stroke:g||f?A.Z.text.neutral:A.Z.text.strong})}),"추가"]})};var H=s(74638),V=s(22292),X=s(22668);let Y=e=>{let{week:t,id:s,isMoved:i}=e,[o,a]=(0,n.KO)(l.GR),[c,d]=(0,n.KO)(l.bA),u=()=>{if("current"===t){let e=o.filter(e=>e.id===s)[0];e.week="next",e.isChecked=!1,e.isMoved=!0,a(e=>e.filter(e=>e.id!==s)),d(t=>[...t,e])}else{let e=c.filter(e=>e.id===s)[0];e.week="current",e.isChecked=!1,e.isMoved=void 0,d(e=>e.filter(e=>e.id!==s)),a(t=>[...t,e])}};return"next"!==t||i?(0,r.jsx)("button",{type:"button",className:"button-line button-small whitespace-nowrap",onClick:()=>u(),children:"current"===t?"다음주로 이동":"되돌리기"}):null},q=e=>{let{week:t,id:s}=e,o=(0,n.b9)(l.GR),a=(0,n.b9)(l.bA),[c,d]=(0,i.useState)(!1),u=()=>{"current"===t?o(e=>e.filter(e=>e.id!==s)):a(e=>e.filter(e=>e.id!==s))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{type:"button",onClick:()=>d(!0),children:(0,r.jsx)(V.Z,{size:20})}),(0,r.jsx)(X.Z,{isOpen:c,onDismiss:()=>d(!1),title:"정말로 삭제하시겠어요?",buttons:{left:{text:"취소",className:"button-secondary button-medium font-body-14 text-text-strong"},right:{text:"확인",className:"button-primary button-medium font-body-14 text-text-invert",onClick:()=>u()}}})]})},J=e=>{let{id:t,value:s,onChange:n}=e,[l,o]=(0,i.useState)(!1);return(0,r.jsx)("div",{className:(0,a.cn)($.default,$.review,l&&$.reviewEditing),children:(0,r.jsx)("input",{type:"text",className:"w-full font-body-16 outline-none bg-transparent",value:s,onChange:e=>null==n?void 0:n(e.currentTarget.value),onFocus:()=>o(!0),onBlur:()=>o(!1),placeholder:"할 일을 입력해 주세요",autoFocus:t<1})})},$={default:"w-full pr-3 py-3.5 flex items-center justify-between h-12 focus-within:outline-none cursor-pointer",review:"bg-transparent box-border border-b border-transparent",reviewEditing:"border-b border-text-primary"},U=e=>{let{isChecked:t,setIsChecked:s,todo:n,setTodo:i,week:l,id:o,isMoved:a=!1}=e;return(0,r.jsxs)("div",{className:"h-12 flex items-center",children:["current"===l?(0,r.jsx)(H.Z,{id:o,value:n,onChange:i,checked:t,onClickCheckbox:s,category:"review",placeholder:"할 일을 입력해 주세요"}):(0,r.jsx)(J,{id:o,value:n,onChange:i}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Y,{week:l,id:o,isMoved:a}),(0,r.jsx)(q,{week:l,id:o})]})]})},{year:ee,month:et,week:es}=(0,w._y)(),{nextYear:er,nextMonth:en,nextWeek:ei}=(0,w.eQ)(),el={year:ee,month:et,week:es},eo={year:er,month:en,week:ei},ea=e=>{let{week:t}=e,s=(0,n.b9)(l.yX),o=(0,n.b9)(l.Ct),[a,c]=(0,n.KO)(l.GR),[u,h]=(0,n.KO)(l.bA),x=(0,n.Dv)(l.cd);(0,i.useEffect)(()=>{"current"===t?(async()=>{let e=(await d(el)).todos.map(e=>({week:"current",isChecked:"DONE"===e.status,todo:e.content,id:e.id}));c(e),s(e)})():"next"===t&&(async()=>{let e=(await d(eo)).todos.map(e=>({week:"next",isChecked:"DONE"===e.status,todo:e.content,id:e.id}));h(e),o(e)})()},[x.step1,c,s,o,h,t]);let g=(e,s)=>{"current"===t?c(t=>t.map(t=>t.id===e?{...t,todo:s}:t)):h(t=>t.map(t=>t.id===e?{...t,todo:s}:t))},p=e=>{"current"===t?c(t=>t.map(t=>t.id===e?{...t,isChecked:!t.isChecked}:t)):h(t=>t.map(t=>t.id===e?{...t,isChecked:!t.isChecked}:t))},m=(0,i.useMemo)(()=>"current"===t?a:u,[a,u,t]);return(0,r.jsx)("div",{className:"flex flex-col",children:m.map((e,t)=>(0,r.jsx)(U,{setTodo:t=>g(e.id,t),setIsChecked:()=>p(e.id),...e},t))})},ec=()=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-col rounded-2xl bg-surface-foreground py-5 px-9 mb-0.5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("p",{className:"font-title-16 text-text-strong",children:"이번주 할 일"}),(0,r.jsx)(B,{category:"currentTodo"})]}),(0,r.jsx)(ea,{week:"current"})]}),(0,r.jsxs)("div",{className:"flex flex-col rounded-2xl bg-surface-foreground py-5 px-9",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("p",{className:"font-title-16 text-text-strong",children:"다음주 할 일"}),(0,r.jsx)(B,{category:"nextTodo"})]}),(0,r.jsx)(ea,{week:"next"})]})]});var ed=s(63278),eu=s(80044),eh=s(54752),ex=s(43110),eg=s(73025);let ep=e=>{let{category:t,id:s}=e,[o,a]=(0,i.useState)(!1),c=(0,n.b9)(l.zs),d=(0,n.b9)(l.jI);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{type:"button",className:"flex items-center h-8 gap-1 self-end cursor-pointer",onClick:()=>a(!0),children:[(0,r.jsx)(V.Z,{size:20}),(0,r.jsx)("p",{className:"font-body-13 text-text-strong",children:"삭제"})]}),(0,r.jsx)(X.Z,{isOpen:o,onDismiss:()=>a(!1),title:"정말로 삭제하시겠어요?",buttons:{left:{text:"취소",className:"button-secondary button-medium font-body-14 text-text-strong"},right:{text:"확인",className:"button-primary button-medium font-body-14 text-text-invert",onClick:()=>{("highLight"===t?c:d)(e=>e.filter(e=>String(e.id)!==String(s)))}}}})]})};var em=s(4979),eb=e=>{let{size:t=20,stroke:s="#999CA1",...n}=e;return(0,r.jsx)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:(0,r.jsx)("path",{d:"M15 8L10 13L5 8",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},ef=e=>{let{id:t,initialItem:s="",items:n,className:l,onSelect:o,children:c,...d}=e,[u,h]=(0,i.useState)(!1),[x,g]=(0,i.useState)(""),[p,m]=(0,i.useState)(""),b=(0,i.useRef)(null),f=(e,t)=>{g(e.value),h(!1),o&&o(e,t)},v=(0,i.useCallback)(e=>{b.current&&!b.current.contains(e.target)&&h(!1)},[]),j=(0,i.useMemo)(()=>n.filter(e=>e.id===x)[0],[n,x]);return(0,i.useEffect)(()=>{var e,t;g(null!==(e=null==j?void 0:j.id)&&void 0!==e?e:s),m(null!==(t=null==j?void 0:j.name)&&void 0!==t?t:s)},[j,s,x]),(0,i.useEffect)(()=>(document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}),[v]),(0,r.jsxs)("div",{className:(0,a.cn)("relative w-full h-[2.75rem]",l),ref:b,...d,children:[(0,r.jsxs)("button",{type:"button",className:"appearance-none w-full h-full p-3 font-body-14 cursor-pointer border border-line-normal rounded-lg flex items-center justify-between focus:outline-none focus:border-line-focus hover:border-line-normalHover disabled:bg-surface-base disabled:cursor-not-allowed disabled:hover:border-line-normal",onClick:()=>h(e=>!e),children:[(0,r.jsx)("span",{className:(0,a.cn)(j&&s?"text-text-strong":"text-text-neutral"),children:p}),(0,r.jsx)(eb,{})]}),u&&(0,r.jsxs)("ul",{className:"absolute w-full max-h-[203px] top-[2.75rem] left-0 py-1 z-10 cursor-pointer border border-line-assistive rounded-lg  bg-surface-foreground overflow-scroll ",style:{boxShadow:"0px 8px 20px 0px #00000014, 0px 0px 2px 0px #0000000D"},children:[n.map(e=>(0,r.jsx)("li",{className:"h-[2.75rem] py-3 px-5 hover:bg-surface-background",value:e.value,onClick:()=>f(e,t),id:String(e.id),children:e.name},e.value)),c]})]})},ev=e=>{let{...t}=e,[s,n]=(0,i.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ef,{...t,children:(0,r.jsxs)("li",{className:"h-[2.75rem] py-3 px-5 hover:bg-surface-background flex items-center gap-1 text-text-primary",onClick:()=>n(!0),children:[(0,r.jsx)(W.Z,{size:16,stroke:A.Z.text.primary}),"새로운 프로젝트 추가"]})}),(0,r.jsx)(em.Z,{isOpen:s,closeSheet:()=>n(!1)})]})};let ej={highLight:"주목할만한 성취가 아니어도 괜찮아요.\n작은 기록이 모여, 큰 변화를 만들어 줄거예요.",lowLight:"이번 주에 아쉬웠던 것은 무엇인가요?\n누구나 실수할 수 있지만 반복하지 않는 것이 중요해요."},ew=e=>{let{id:t,category:s,content:n,project:i,items:l,index:o,onSelect:a,writeReview:c,isRequiredError:d}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(eg.Z,{className:"min-h-[6.5rem]",value:n,placeholder:ej[s],onChange:e=>{c(e,t)}}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(ex.Z,{size:36}),(0,r.jsx)(ev,{id:String(t),items:l,className:"mt-2",initialItem:i&&""!==i.id?i.id:"관련 프로젝트 (선택)",onSelect:a})]})]}),(0,r.jsxs)("div",{className:"grid",children:[d&&(0,r.jsx)("p",{className:"font-body-12 text-state-negative justify-self-start",children:"최소 1개의 하이라이트를 작성해 주세요"}),0!==o&&(0,r.jsx)("div",{className:"justify-self-end",children:(0,r.jsx)(ep,{id:String(t),category:s})})]})]})},{year:ey,month:ek,week:eN}=(0,w._y)(),eC={year:ey,month:ek,week:eN},eL=e=>{let{category:t}=e,[s,o]=(0,n.KO)(l.zs),[a,c]=(0,n.KO)(l.jI),d=(0,n.b9)(l.gV),x=(0,n.b9)(l.y9),g=(0,n.b9)(l.cd),p=(0,n.Dv)(l.c6),m=(0,n.Dv)(l.pj),[b,f]=(0,n.KO)(l.Y7),v=(e,s)=>{"highLight"===t?o(t=>t.map(t=>String(t.id)===String(s)?{...t,content:e}:t)):c(t=>t.map(t=>String(t.id)===String(s)?{...t,content:e}:t))},j=(e,s)=>{let r={id:Number(e.id),content:e.name,progressRate:0};"highLight"===t?o(e=>e.map(e=>String(e.id)===String(s)?{...e,id:e.id,project:r}:e)):c(e=>e.map(e=>String(e.id)===String(s)?{...e,id:e.id,project:r}:e))};return(0,i.useEffect)(()=>{2===m?(async()=>{let e=await u(eC);(null==e?void 0:e.highlights.length)>0&&(d(e.highlights),o(e.highlights))})():(async()=>{let e=await h(eC);(null==e?void 0:e.lowlights.length)>0&&(x(e.lowlights),c(e.lowlights))})()},[m,o,d,x,c]),(0,i.useEffect)(()=>{(async()=>{let e=await (0,eh._z)();f(null==e?void 0:e.projects.map(e=>({id:e.id,name:e.title,value:e.title})))})()},[f]),(0,i.useEffect)(()=>{"highLight"===t?s.length>0&&s.every(e=>{var t;return(null==e?void 0:null===(t=e.content)||void 0===t?void 0:t.length)>0})?g(e=>({...e,step2:!0})):g(e=>({...e,step2:!1})):a.length>0&&a.every(e=>{var t;return(null==e?void 0:null===(t=e.content)||void 0===t?void 0:t.length)>0})?g(e=>({...e,step3:!0})):g(e=>({...e,step3:!1}))},[t,s,a,g]),(0,r.jsx)("div",{className:"w-full p-5 bg-surface-foreground rounded-xl flex flex-col gap-6",children:"highLight"===t?s.map((e,n)=>(0,r.jsx)(ew,{category:t,items:b,index:n,onSelect:j,writeReview:v,isRequiredError:1===s.length&&0===e.content.length&&p.step2,...e},String(e.id))):a.map((e,s)=>(0,r.jsx)(ew,{category:t,items:b,index:s,onSelect:j,writeReview:v,isRequiredError:1===a.length&&0===e.content.length&&p.step3,...e},String(e.id)))})},eS=e=>{let{category:t}=e;return(0,r.jsxs)("section",{className:"flex flex-col gap-3 mb-[6.5rem]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[eE[t].icon,(0,r.jsx)("p",{className:"font-head-20 text-text-strong",children:eE[t].title})]}),(0,r.jsx)(B,{category:t})]}),(0,r.jsx)(eL,{category:t})]})},eE={highLight:{icon:(0,r.jsx)(ed.Z,{size:24}),title:"하이라이트"},lowLight:{icon:(0,r.jsx)(eu.Z,{size:24}),title:"로우라이트"}};var eZ=s(30108);let{prevYear:eD,prevMonth:eO,prevWeek:eM}=(0,w.lE)(),eR=e=>{let{category:t}=e,[s,o]=(0,n.KO)(l.r3),[a,c]=(0,n.KO)(l.vS),d="highLight"===t?s:a;return(0,i.useEffect)(()=>{"highLight"===t?(async()=>{o((await u({year:eD,month:eO,week:eM})).highlights)})():"lowLight"===t&&(async()=>{c((await h({year:eD,month:eO,week:eM})).lowlights)})()},[t,o,c]),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:d.map(e=>(0,r.jsx)(eZ.y,{...e},String(e.id)))})},e_=e=>{let{category:t}=e;return(0,r.jsxs)("section",{className:"flex flex-col gap-3 mb-8",children:[(0,r.jsxs)("p",{className:"font-head-20 text-text-strong",children:["지난주 ","highLight"===t?"하이라이트":"로우라이트"]}),(0,r.jsx)(eR,{category:t})]})};var ez=s(69219),eT=s(71863),eI=s(22369);let eK=()=>{let e=(0,n.Dv)(l.gV),t=(0,n.Dv)(l.y9),s=(0,n.Dv)(l.zs),r=(0,n.Dv)(l.jI),i=e=>e.map(e=>e.id),o=(e,t)=>e.filter(e=>!t.includes(e)),a=(e,t)=>e.filter(e=>t.includes(e)),c=i(e),d=i(t),u=i(s),h=i(r),x=o(u,c),g=o(h,d),p=a(c,u),m=a(d,h),b=o(c,u),f=o(d,h),v=s.filter(e=>x.includes(e.id));return{postHighlights:v,postLowlights:r.filter(e=>g.includes(e.id)),putHighlights:s.filter(e=>p.includes(e.id)),putLowlights:r.filter(e=>m.includes(e.id)),deleteHightlightIds:b,deleteLowlightIds:f}},eQ=()=>{let e=(0,ez.useRouter)(),t=(0,n.Dv)(l.cd),s=(0,n.Dv)(l.DQ),o=(0,n.b9)(l.pj),c=(0,n.b9)(l.c6),{addToast:d}=(0,O.Z)(),{postHighlights:u,putHighlights:h,deleteHightlightIds:x}=eK(),g=async()=>{if(!t.step2){c(e=>({...e,step2:!0}));return}let e=u.map(e=>{var t,s;return{content:e.content,projectId:0!==Number(null===(t=e.project)||void 0===t?void 0:t.id)?Number(null===(s=e.project)||void 0===s?void 0:s.id):null}}),r=h.map(e=>{var t,s;return{id:e.id,content:e.content,projectId:0!==Number(null===(t=e.project)||void 0===t?void 0:t.id)?Number(null===(s=e.project)||void 0===s?void 0:s.id):null}});try{await Promise.all([...e.length>0?[p({reviewId:s,highlights:e})]:[],...r.length>0?[Promise.all(r.map(e=>(0,eI.B)(e.id,{content:e.content,projectId:e.projectId})))]:[],...x.length>0?[Promise.all(x.map(e=>(0,eT.lJ)(e)))]:[]]),o(3)}catch(e){d({iconType:"error",message:"다시 시도해 주세요."})}};return(0,i.useEffect)(()=>{s&&t.step1||e.push("/review")},[s,t,e]),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("div",{className:"flex justify-between gap-2.5",children:[(0,r.jsx)("button",{type:"button",className:"button-secondary button-large",onClick:()=>o(1),children:"이전"}),(0,r.jsx)("button",{type:"button",className:(0,a.cn)("button-primary button-large",!t.step2&&"bg-button-disabled text-text-neutral hover:bg-button-disabled"),onClick:g,children:"다음"})]})})},eG=()=>{let e=(0,ez.useRouter)(),t=(0,n.Dv)(l.DQ),s=(0,n.Dv)(l.cd),o=(0,n.b9)(l.pj),c=(0,n.b9)(l.c6),{postLowlights:d,putLowlights:u,deleteLowlightIds:h}=eK(),{addToast:x}=(0,O.Z)(),g=async()=>{if(!s.step3){c(e=>({...e,step3:!0}));return}let r=d.map(e=>{var t,s;return{content:e.content,projectId:0!==Number(null===(t=e.project)||void 0===t?void 0:t.id)?Number(null===(s=e.project)||void 0===s?void 0:s.id):null}}),n=u.map(e=>{var t,s;return{id:e.id,content:e.content,projectId:0!==Number(null===(t=e.project)||void 0===t?void 0:t.id)?Number(null===(s=e.project)||void 0===s?void 0:s.id):null}});try{await Promise.all([...r.length>0?[m({reviewId:t,lowlights:r})]:[],...n.length>0?[Promise.all(n.map(e=>(0,eI.t)(e.id,{content:e.content,projectId:e.projectId})))]:[],...h.length>0?[Promise.all(h.map(e=>(0,eT.kV)(e)))]:[]]),o(3),x({message:"이번주 회고가 성공적으로 등록됐어요.",iconType:"success"}),e.push("/dashboards")}catch(e){x({iconType:"error",message:"다시 시도해 주세요."})}};return(0,i.useEffect)(()=>{t&&s.step1&&s.step2||e.push("/review")},[t,s,e]),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("div",{className:"flex justify-between gap-2.5",children:[(0,r.jsx)("button",{type:"button",className:"button-secondary button-large",onClick:()=>o(2),children:"이전"}),(0,r.jsx)("button",{type:"button",className:(0,a.cn)("button-primary button-large",!s.step3&&"bg-button-disabled text-text-neutral hover:bg-button-disabled"),onClick:g,children:"등록"})]})})},eF=[(0,r.jsx)(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:"flex flex-col gap-4 mb-10",children:[(0,r.jsx)("p",{className:"font-head-20 text-text-strong",children:"이번 주 레이스는 어떠셨나요?"}),(0,r.jsx)(L,{})]}),(0,r.jsxs)("section",{className:"flex flex-col gap-4 mb-8",children:[(0,r.jsx)("p",{className:"font-head-20 text-text-strong",children:"이번 주 할 일을 점검해 보세요"}),(0,r.jsx)(ec,{})]}),(0,r.jsx)(F,{})]}),{},"step1"),(0,r.jsx)(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e_,{category:"highLight"}),(0,r.jsx)(eS,{category:"highLight"}),(0,r.jsx)(eQ,{})]}),{},"step2"),(0,r.jsx)(()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e_,{category:"lowLight"}),(0,r.jsx)(eS,{category:"lowLight"}),(0,r.jsx)(eG,{})]}),{},"step3")];function eW(){let e=(0,n.Dv)(l.pj),[t,s]=(0,i.useState)("100%"),c=(0,i.useRef)([]),d=o();(0,i.useEffect)(()=>{d()},[]);let u=53.625*(e-1);return(0,i.useEffect)(()=>{let t=new ResizeObserver(e=>{for(let t of e){let{height:e}=t.contentRect;s("".concat(e+120,"px"))}});return c.current[e-1]&&t.observe(c.current[e-1]),()=>{t.disconnect()}},[e]),(0,r.jsx)("div",{className:"w-fit flex gap-[150px] overflow-hidden",style:{height:t},children:eF.map((t,s)=>(0,r.jsx)("div",{ref:e=>c.current[s]=e,className:(0,a.cn)("w-[44.25rem] transition duration-500 h-fit",e-1===s?"opacity-100":"opacity-0"),style:{transform:"translateX(-".concat(u,"rem)")},children:t},"Step-".concat(s)))})}},22292:function(e,t,s){"use strict";var r=s(47586);t.Z=e=>{let{size:t=20,stroke:s="#999CA1",fill:n="none",...i}=e;return(0,r.jsxs)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:n,xmlns:"http://www.w3.org/2000/svg",...i,children:[(0,r.jsx)("path",{d:"M4 5H16L15.142 16.1534C15.0619 17.1954 14.193 18 13.1479 18H6.85206C5.80699 18 4.93811 17.1954 4.85795 16.1534L4 5Z",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M7.5 9L8 14",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M15 4.5L14.5 2L5.5 2L5 4.5",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M18 5L2 5",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M12.5 9L12 14",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}},43110:function(e,t,s){"use strict";var r=s(47586);t.Z=e=>{let{size:t=36,stroke:s="#999CA1",...n}=e;return(0,r.jsxs)("svg",{width:t,height:t,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:[(0,r.jsx)("path",{d:"M18 3V9C18 17.8366 25.1634 25 34 25V25",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"1 4"}),(0,r.jsx)("mask",{id:"path-2-inside-1_592_10895",fill:"white",children:(0,r.jsx)("path",{d:"M36 22C35.606 22 35.2159 22.0776 34.8519 22.2284C34.488 22.3791 34.1573 22.6001 33.8787 22.8787C33.6001 23.1573 33.3791 23.488 33.2284 23.8519C33.0776 24.2159 33 24.606 33 25C33 25.394 33.0776 25.7841 33.2284 26.1481C33.3791 26.512 33.6001 26.8427 33.8787 27.1213C34.1573 27.3999 34.488 27.6209 34.8519 27.7716C35.2159 27.9224 35.606 28 36 28L36 25V22Z"})}),(0,r.jsx)("path",{d:"M36 22C35.606 22 35.2159 22.0776 34.8519 22.2284C34.488 22.3791 34.1573 22.6001 33.8787 22.8787C33.6001 23.1573 33.3791 23.488 33.2284 23.8519C33.0776 24.2159 33 24.606 33 25C33 25.394 33.0776 25.7841 33.2284 26.1481C33.3791 26.512 33.6001 26.8427 33.8787 27.1213C34.1573 27.3999 34.488 27.6209 34.8519 27.7716C35.2159 27.9224 35.606 28 36 28L36 25V22Z",fill:s,stroke:s,strokeWidth:"3",mask:"url(#path-2-inside-1_592_10895)"}),(0,r.jsx)("mask",{id:"path-3-inside-2_592_10895",fill:"white",children:(0,r.jsx)("path",{d:"M21 0C21 0.79565 20.6839 1.55871 20.1213 2.12132C19.5587 2.68393 18.7956 3 18 3C17.2044 3 16.4413 2.68393 15.8787 2.12132C15.3161 1.55871 15 0.79565 15 4.76837e-07L18 0H21Z"})}),(0,r.jsx)("path",{d:"M21 0C21 0.79565 20.6839 1.55871 20.1213 2.12132C19.5587 2.68393 18.7956 3 18 3C17.2044 3 16.4413 2.68393 15.8787 2.12132C15.3161 1.55871 15 0.79565 15 4.76837e-07L18 0H21Z",fill:s,stroke:s,strokeWidth:"3",mask:"url(#path-3-inside-2_592_10895)"})]})}},74638:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(47586),n=s(28823),i=e=>{let{size:t=20,stroke:s="white",fill:n="#FF5C37",...i}=e;return(0,r.jsxs)("svg",{width:t,height:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:[(0,r.jsx)("rect",{width:t,height:t,rx:"4",fill:n}),(0,r.jsx)("path",{d:"M5.5 10L9 14L15 6.5",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},l=s(86241),o=s(41778),a=(0,n.memo)(e=>{let{value:t,placeholder:s,onChange:a,checked:u,onClickCheckbox:h,onBlur:x,width:g,buttons:p,category:m="dashboard",maxLength:b,id:f}=e,v=(0,n.useRef)(null),[j,w]=(0,n.useState)(!1),[y,k]=(0,n.useState)(!1),N="dashboard"===m&&j&&!y||"review"===m&&!y;return(0,r.jsxs)("div",{className:(0,o.cn)(d.default,"dashboard"===m&&d.dashboard,"dashboard"===m&&y&&d.dashboardEditing,"review"===m&&d.review,"review"===m&&y&&d.reviewEditing),style:{width:null!=g?g:"100%",boxShadow:"dashboard"===m?"0px 4px 12px 0px rgba(0, 0, 0, 0.08)":"none"},onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,r.jsx)("button",{type:"button",onClick:h,children:u?(0,r.jsx)(i,{size:20}):(0,r.jsx)(c,{})}),(0,r.jsx)("input",{ref:v,type:"text",className:"w-full font-body-16 outline-none bg-transparent",value:t,placeholder:s,onChange:e=>null==a?void 0:a(e.currentTarget.value),style:{color:u?l.Z.text.normal:l.Z.text.strong},onFocus:()=>k(!0),onBlur:()=>{k(!1),null==x||x()},onKeyDown:e=>{var t,s;e.nativeEvent.isComposing||("Enter"===e.key&&(null===(t=v.current)||void 0===t||t.blur()),"Escape"===e.key&&(null===(s=v.current)||void 0===s||s.blur()))},maxLength:b,autoFocus:!!f&&f<1})]}),N&&p]})});let c=()=>(0,r.jsx)("div",{className:"w-5 h-5 rounded border-[1.5px] border-text-assistive bg-surface-foreground"}),d={default:"px-3 py-3.5 flex items-center justify-between h-12 focus-within:outline-none cursor-pointer",dashboard:"rounded-lg bg-surface-foreground hover:bg-surface-assistive",dashboardEditing:"border border-text-primary hover:bg-surface-foreground",review:"bg-transparent box-border border-b border-transparent",reviewEditing:"border-b border-text-primary"}}},function(e){e.O(0,[568,890,38,97,498,282,366,400,744],function(){return e(e.s=27252)}),_N_E=e.O()}]);