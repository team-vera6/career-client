(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{60933:function(e,t,s){Promise.resolve().then(s.bind(s,93744))},12507:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var l=s(72330),n=s.n(l)},61621:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var l=s(95384),n=s.n(l)},72330:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return i}});let l=s(3397),n=s(90052),a=s(14569),r=l._(s(45074));function i(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=a.Image},93744:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return K}});var l=s(47586),n=s(69219),a=s(28823),r=s(54752),i=s(4979),c=s(57882),o=e=>{let{fetchProjects:t}=e,[s,n]=(0,a.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full flex items-center justify-between mb-[1.875rem]",children:[(0,l.jsx)("p",{className:"font-head-20 text-text-strong",children:"프로젝트"}),(0,l.jsxs)("button",{className:"button-primary button-medium",onClick:()=>n(!0),children:[(0,l.jsx)(c.Z,{size:20,stroke:"#fff"}),(0,l.jsx)("p",{className:"font-body-14 text-text-invert",children:"추가"})]})]}),(0,l.jsx)(i.Z,{isOpen:s,closeSheet:()=>n(!1),fetchProjects:t})]})},d=s(12507),u={src:"/_next/static/media/project-empty.d2908052.png",height:200,width:200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAIVBMVEVMaXGYmKGZm6KZnKGZnKGZnKGirq6an6CZm6GZm6GZnKC9Gy1WAAAAC3RSTlMAEiN8t2gHN1aIo/jdn5EAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAAzSURBVHicHYjJEQAwCIRYj6jpv+CM+QADwKEb1LrpCRbjGSVkPrfCwEN5AEpLQMYfG+sHHfcAqP5tOXoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},x=()=>(0,l.jsxs)("div",{className:"w-full flex items-center justify-center flex-col gap-10 mt-[5.625rem]",children:[(0,l.jsx)("p",{className:"font-body-16 text-text-normal",children:"새로운 프로젝트를 추가해 보세요!"}),(0,l.jsx)(d.default,{src:u,alt:"no project",width:100,height:100})]}),m=s(18775);let h=async e=>await (0,m.GZ)("/projects/".concat(e));var f=s(22668),p=s(31407),j=s(51e3);let g=async(e,t)=>await (0,m.vx)("/projects/".concat(e),t);var b=s(58389),v=s(86156),w=s(81932),N=s(73025),y=s(29335),A=s(52138),k=s(61621),S=e=>{let{size:t=16,stroke:s="#999CA1",...n}=e;return(0,l.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:(0,l.jsx)("path",{d:"M6 3L12 8L6 13",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},C=s(63278),Z=s(80044),D=s(41778),O=e=>{let{className:t}=e;return(0,l.jsx)("span",{className:(0,D.cn)("w-0 h-[3.75rem] border-l border-line-normalHover",t)})},E=e=>{let{type:t,review:s,week:n,last:a}=e;return(0,l.jsxs)("div",{className:"flex gap-4 h-[5.375rem] relative",children:["highlight"===t?(0,l.jsx)(C.Z,{size:24,className:"mt-2"}):(0,l.jsx)(Z.Z,{size:24,className:"mt-2"}),!a&&(0,l.jsx)(O,{className:"absolute left-2.5 top-10"}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"mb-1 border border-line-assistive bg-surface-foreground rounded-lg p-3",children:(0,l.jsx)("p",{className:"font-body-14 text-text-strong line-clamp-2",children:s})}),(0,l.jsx)("div",{className:"w-full flex justify-end",children:(0,l.jsx)(k.default,{href:"/dashboards?year=".concat(n.year,"&month=").concat(n.month,"&week=").concat(n.week),target:"_blank",children:(0,l.jsxs)("div",{className:"flex items-center gap-0.5 w-fit",children:[(0,l.jsx)("p",{className:"font-body-13 text-text-strong",children:"".concat(n.month,"월 ").concat(n.week,"주차")}),(0,l.jsx)(S,{size:16})]})})})]})]})},G=e=>{let{isOpen:t,closeSheet:s,projectId:n,initialTitle:r,initialDate:i,initialGoal:c,initialDescription:o,reviews:d}=e,{addToast:u}=(0,y.Z)(),[x,m]=(0,a.useState)(""),[h,p]=(0,a.useState)({start:"",end:""}),[k,S]=(0,a.useState)(""),[C,Z]=(0,a.useState)(""),[D,O]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&(m(null!=r?r:""),p(i?{start:(0,A.zB)(i.start),end:(0,A.zB)(i.end)}:{start:"",end:""}),S(null!=c?c:""),Z(null!=o?o:""),S(null!=c?c:""))},[t,r,i,c,o]);let G=(0,a.useMemo)(()=>x!==r||h.start!==(null==i?void 0:i.start)||h.end!==(null==i?void 0:i.end)||k!==c||C!==o,[x,h,C,k,r,i,o,c]),_=async()=>{let e={title:x,startDate:(0,A.xH)(h.start),endDate:(0,A.xH)(h.end),goal:k,content:C};try{await g(n,e),u({message:"프로젝트 내용이 수정되었어요.",iconType:"success"}),s()}catch(e){u({message:"프로젝트 수정에 실패했어요. 다시 시도해주세요.",iconType:"error"})}},z=(e,t,s)=>{if(e.currentTarget.value.length>t){u({iconType:"error",message:"최대 글자수를 초과했습니다"});return}s(e.currentTarget.value)};return(0,l.jsxs)(j.Z,{disableAnimation:!0,disableDimmer:!0,isOpen:t,closeActionSheet:()=>G?O(!0):s(),buttons:[{text:"저장",onClick:_}],children:[(0,l.jsx)(w.Z,{placeholder:"프로젝트 이름",className:"!font-bold",value:x,onChange:e=>z(e,73,m),id:String(n),autoFocus:!0}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 mb-6 mt-3",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal",children:"기간"}),(0,l.jsx)(b.Z,{date:h,setDate:p})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal",children:"목표"}),(0,l.jsx)(v.Z,{placeholder:"목표를 입력해주세요",maxLength:50,value:k,onChange:e=>z(e,50,S)})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal",children:"내용"}),(0,l.jsx)(N.Z,{placeholder:"내용을 입력해주세요",maxLength:160,className:"h-[9.6875rem]",value:C,onChange:e=>{if(e.length>500){u({iconType:"error",message:"최대 글자수를 초과했습니다"});return}Z(e)}})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-5 font-title-16 text-text-strong",children:"연관된 회고"}),(0,l.jsx)("div",{className:"flex flex-col gap-3",children:null==d?void 0:d.map(e=>(0,l.jsx)(E,{type:e.type,review:e.content,week:e.weekNumber,last:e===d[d.length-1]},"".concat(e.type,"-").concat(e.id)))})]}),(0,l.jsx)(f.Z,{isOpen:D,onDismiss:()=>O(!1),title:"변경사항을 저장하지 않고 나가시겠어요?",buttons:{left:{text:"취소"},right:{text:"확인",onClick:s}}})]})},_=e=>{let{title:t,content:s}=e;return(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal shrink-0",children:t}),(0,l.jsx)("p",{className:"font-body-14 text-text-strong whitespace-pre-wrap",children:s})]})},z=e=>{let{percentage:t}=e;return(0,l.jsx)("div",{className:"w-full bg-surface-background rounded relative h-1.5",children:(0,l.jsx)("div",{className:"absolute left-0 top-0 bottom-0 h-1.5 rounded bg-surface-normal",style:{width:"".concat(t,"%")}})})},H=e=>{let{startDate:t,endDate:s,percentage:n}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"font-body-14 text-text-strong",children:[t.replaceAll("-",".")," - ",s.replaceAll("-",".")]}),(0,l.jsxs)("p",{className:"font-body-14 text-text-primary",children:[Math.round(n),"%"]})]}),(0,l.jsx)(z,{percentage:n})]})},I=e=>{var t,s;let{isOpen:n,closeSheet:i,projectId:c}=e,[o,d]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[m,g]=(0,a.useState)(),[b,v]=(0,a.useState)([]),w=(0,a.useCallback)(async()=>{let e=await (0,r.e5)(c);g(e),v(N(e.highlights,e.lowlights))},[c]);(0,a.useEffect)(()=>{n&&w()},[n,w]);let N=(e,t)=>{let s=[...e.map(e=>({...e,type:"highlight"})),...t.map(e=>({...e,type:"lowlight"}))];return s.sort(p.H),s},y=async()=>{try{await h(c)}catch(e){console.error("fail to delete project",e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.Z,{isOpen:n,closeActionSheet:i,buttons:[{text:"삭제",buttonStyle:"line",onClick:()=>d(!0)},{text:"수정",buttonStyle:"line",onClick:()=>x(!0)}],children:(0,l.jsx)(l.Fragment,{children:m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"font-head-24 text-text-strong mb-4",children:m.title}),(0,l.jsx)(H,{startDate:m.startDate,endDate:m.endDate,percentage:m.progress}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,l.jsx)(_,{title:"목표",content:m.goal}),(0,l.jsx)(_,{title:"내용",content:m.content})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-5 font-title-16 text-text-strong",children:"연관된 회고"}),(0,l.jsx)("div",{className:"flex flex-col gap-3",children:b.map(e=>(0,l.jsx)(E,{type:e.type,review:e.content,week:e.weekNumber,last:e===b[b.length-1]},"".concat(e.type,"-").concat(e.id)))})]})]}):(0,l.jsx)(P,{})})}),(0,l.jsx)(f.Z,{isOpen:o,title:"정말로 삭제하시겠어요?",onDismiss:()=>d(!1),buttons:{left:{text:"취소"},right:{text:"확인",onClick:async()=>{await y(),i()}}}}),(0,l.jsx)(G,{isOpen:u,closeSheet:async()=>{x(!1),await w()},projectId:c,initialTitle:null==m?void 0:m.title,initialDate:{start:null!==(t=null==m?void 0:m.startDate)&&void 0!==t?t:"",end:null!==(s=null==m?void 0:m.endDate)&&void 0!==s?s:""},initialGoal:null==m?void 0:m.goal,initialDescription:null==m?void 0:m.content,reviews:b})]})};let P=()=>(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)("p",{className:"font-body-16 text-text-weak",children:"로딩중..."})});var L=s(39390),M=e=>{let{id:t,title:s,progress:n,onClose:r,initialOpen:i}=e,[c,o]=(0,a.useState)(null!=i&&i);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full rounded-lg flex items-center justify-between gap-2.5 bg-surface-foreground px-5 py-3 hover:bg-surface-foregroundOn cursor-pointer",onClick:()=>o(!0),children:[(0,l.jsx)("p",{className:"font-body-16 text-text-strong max-w-[53.375rem] text-ellipsis whitespace-nowrap overflow-hidden",title:s,children:s}),(0,l.jsx)(L.Z,{percentage:n})]},t),(0,l.jsx)(I,{projectId:t,isOpen:c,closeSheet:()=>{null==r||r(),o(!1)}})]})};function K(){let e=(0,n.useSearchParams)().get("project"),[t,s]=(0,a.useState)([]);(0,a.useEffect)(()=>{i()},[]);let i=async()=>{let{projects:e}=await (0,r.ku)();s(e)};return(0,l.jsxs)("div",{className:"w-[60rem]",children:[(0,l.jsx)(o,{fetchProjects:i}),(0,l.jsx)("div",{className:"w-full flex flex-col gap-3",children:t.length>0?(0,l.jsx)(l.Fragment,{children:t.map(t=>(0,l.jsx)(M,{id:t.id,title:t.title,progress:t.progress,onClose:i,initialOpen:t.id===Number(e)},t.id))}):(0,l.jsx)(x,{})})]})}},31407:function(e,t,s){"use strict";s.d(t,{H:function(){return l}});let l=(e,t)=>{let s=t.weekNumber.year-e.weekNumber.year,l=t.weekNumber.month-e.weekNumber.month,n=t.weekNumber.week-e.weekNumber.week;return s||l||n}}},function(e){e.O(0,[568,890,38,384,97,569,498,282,366,400,744],function(){return e(e.s=60933)}),_N_E=e.O()}]);