(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{60933:function(e,t,s){Promise.resolve().then(s.bind(s,93744))},12507:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var n=s(72330),l=s.n(n)},72330:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return i}});let n=s(3397),l=s(90052),a=s(14569),r=n._(s(45074));function i(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=a.Image},71152:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let n=s(3397)._(s(28823)).default.createContext(null)},93744:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var n=s(47586),l=s(28823),a=s(54752),r=s(4979),i=s(57882),c=e=>{let{fetchProjects:t}=e,[s,a]=(0,l.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"w-full flex items-center justify-between mb-[1.875rem]",children:[(0,n.jsx)("p",{className:"font-head-20 text-text-strong",children:"프로젝트"}),(0,n.jsxs)("button",{className:"button-primary button-medium",onClick:()=>a(!0),children:[(0,n.jsx)(i.Z,{size:20,stroke:"#fff"}),(0,n.jsx)("p",{className:"font-body-14 text-text-invert",children:"추가"})]})]}),(0,n.jsx)(r.Z,{isOpen:s,closeSheet:()=>a(!1),fetchProjects:t})]})},o=s(12507),d={src:"/_next/static/media/project-empty.d2908052.png",height:200,width:200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAIVBMVEVMaXGYmKGZm6KZnKGZnKGZnKGirq6an6CZm6GZm6GZnKC9Gy1WAAAAC3RSTlMAEiN8t2gHN1aIo/jdn5EAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAAzSURBVHicHYjJEQAwCIRYj6jpv+CM+QADwKEb1LrpCRbjGSVkPrfCwEN5AEpLQMYfG+sHHfcAqP5tOXoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},u=()=>(0,n.jsxs)("div",{className:"w-full flex items-center justify-center flex-col gap-10 mt-[5.625rem]",children:[(0,n.jsx)("p",{className:"font-body-16 text-text-normal",children:"새로운 프로젝트를 추가해 보세요!"}),(0,n.jsx)(o.default,{src:d,alt:"no project",width:100,height:100})]}),x=s(18775);let m=async e=>await (0,x.GZ)("/projects/".concat(e));var f=s(22668),h=s(31407),p=s(51e3);let j=async(e,t)=>await (0,x.vx)("/projects/".concat(e),t);var g=s(58389),b=s(86156),v=s(81932),w=s(73025),N=s(29335),y=s(52138),A=e=>{let{size:t=16,stroke:s="#999CA1",...l}=e;return(0,n.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l,children:(0,n.jsx)("path",{d:"M6 3L12 8L6 13",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},k=s(63278),S=s(80044),C=s(41778),Z=e=>{let{className:t}=e;return(0,n.jsx)("span",{className:(0,C.cn)("w-0 h-[3.75rem] border-l border-line-normalHover",t)})},O=e=>{let{type:t,review:s,week:l,last:a}=e;return(0,n.jsxs)("div",{className:"flex gap-4 h-[5.375rem] relative",children:["highlight"===t?(0,n.jsx)(k.Z,{size:24,className:"mt-2"}):(0,n.jsx)(S.Z,{size:24,className:"mt-2"}),!a&&(0,n.jsx)(Z,{className:"absolute left-2.5 top-10"}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"mb-1 border border-line-assistive bg-surface-foreground rounded-lg p-3",children:(0,n.jsx)("p",{className:"font-body-14 text-text-strong line-clamp-2",children:s})}),(0,n.jsxs)("div",{className:"flex items-center gap-0.5 justify-end",children:[(0,n.jsx)("p",{className:"font-body-13 text-text-strong",children:"".concat(l.month,"월 ").concat(l.week,"주차")}),(0,n.jsx)(A,{size:16})]})]})]})},D=e=>{let{isOpen:t,closeSheet:s,projectId:a,initialTitle:r,initialDate:i,initialGoal:c,initialDescription:o,reviews:d}=e,{addToast:u}=(0,N.Z)(),[x,m]=(0,l.useState)(""),[h,A]=(0,l.useState)({start:"",end:""}),[k,S]=(0,l.useState)(""),[C,Z]=(0,l.useState)(""),[D,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&(m(null!=r?r:""),A(i?{start:(0,y.zB)(i.start),end:(0,y.zB)(i.end)}:{start:"",end:""}),S(null!=c?c:""),Z(null!=o?o:""),S(null!=c?c:""))},[t,r,i,c,o]);let G=(0,l.useMemo)(()=>x!==r||h.start!==(null==i?void 0:i.start)||h.end!==(null==i?void 0:i.end)||k!==c||C!==o,[x,h,C,k,r,i,o,c]),_=async()=>{let e={title:x,startDate:(0,y.xH)(h.start),endDate:(0,y.xH)(h.end),goal:k,content:C};try{await j(a,e),u({message:"프로젝트 내용이 수정되었어요.",iconType:"success"}),s()}catch(e){u({message:"프로젝트 수정에 실패했어요. 다시 시도해주세요.",iconType:"error"})}},P=(e,t,s)=>{if(e.currentTarget.value.length>t){u({iconType:"error",message:"최대 글자수를 초과했습니다"});return}s(e.currentTarget.value)};return(0,n.jsxs)(p.Z,{disableAnimation:!0,isOpen:t,closeActionSheet:()=>G?E(!0):s(),buttons:[{text:"저장",onClick:_}],children:[(0,n.jsx)(v.Z,{placeholder:"프로젝트 이름",className:"!font-bold",value:x,onChange:e=>P(e,73,m),id:String(a),autoFocus:!0}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 mb-6 mt-3",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{className:"font-body-14 text-text-normal",children:"기간"}),(0,n.jsx)(g.Z,{date:h,setDate:A})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{className:"font-body-14 text-text-normal",children:"목표"}),(0,n.jsx)(b.Z,{placeholder:"목표를 입력해주세요",maxLength:50,value:k,onChange:e=>P(e,50,S)})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{className:"font-body-14 text-text-normal",children:"내용"}),(0,n.jsx)(w.Z,{placeholder:"내용을 입력해주세요",maxLength:160,className:"h-[9.6875rem]",value:C,onChange:e=>{if(e.length>500){u({iconType:"error",message:"최대 글자수를 초과했습니다"});return}Z(e)}})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"mb-5 font-title-16 text-text-strong",children:"연관된 회고"}),(0,n.jsx)("div",{className:"flex flex-col gap-3",children:null==d?void 0:d.map(e=>(0,n.jsx)(O,{type:e.type,review:e.content,week:e.weekNumber,last:e===d[d.length-1]},"".concat(e.type,"-").concat(e.id)))})]}),(0,n.jsx)(f.Z,{isOpen:D,onDismiss:()=>E(!1),title:"변경사항을 저장하지 않고 나가시겠어요?",buttons:{left:{text:"취소"},right:{text:"확인",onClick:s}}})]})},E=e=>{let{title:t,content:s}=e;return(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)("p",{className:"font-body-14 text-text-normal shrink-0",children:t}),(0,n.jsx)("p",{className:"font-body-14 text-text-strong whitespace-pre-wrap",children:s})]})},G=e=>{let{percentage:t}=e;return(0,n.jsx)("div",{className:"w-full bg-surface-background rounded relative h-1.5",children:(0,n.jsx)("div",{className:"absolute left-0 top-0 bottom-0 h-1.5 rounded bg-surface-normal",style:{width:"".concat(t,"%")}})})},_=e=>{let{startDate:t,endDate:s,percentage:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("p",{className:"font-body-14 text-text-strong",children:[t," - ",s]}),(0,n.jsxs)("p",{className:"font-body-14 text-text-primary",children:[Math.round(l),"%"]})]}),(0,n.jsx)(G,{percentage:l})]})},P=e=>{var t,s;let{isOpen:r,closeSheet:i,projectId:c}=e,[o,d]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),[j,g]=(0,l.useState)(),[b,v]=(0,l.useState)([]),w=(0,l.useCallback)(async()=>{let e=await (0,a.e5)(c);g(e),v(N(e.highlights,e.lowlights))},[c]);(0,l.useEffect)(()=>{r&&w()},[r,w]);let N=(e,t)=>{let s=[...e.map(e=>({...e,type:"highlight"})),...t.map(e=>({...e,type:"lowlight"}))];return s.sort(h.H),s},y=async()=>{try{await m(c)}catch(e){console.error("fail to delete project",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{isOpen:r,closeActionSheet:i,buttons:[{text:"삭제",buttonStyle:"line",onClick:()=>d(!0)},{text:"수정",buttonStyle:"line",onClick:()=>x(!0)}],children:(0,n.jsx)(n.Fragment,{children:j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"font-head-24 text-text-strong mb-4",children:j.title}),(0,n.jsx)(_,{startDate:j.startDate,endDate:j.endDate,percentage:j.progress}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,n.jsx)(E,{title:"목표",content:j.goal}),(0,n.jsx)(E,{title:"내용",content:j.content})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"mb-5 font-title-16 text-text-strong",children:"연관된 회고"}),(0,n.jsx)("div",{className:"flex flex-col gap-3",children:b.map(e=>(0,n.jsx)(O,{type:e.type,review:e.content,week:e.weekNumber,last:e===b[b.length-1]},"".concat(e.type,"-").concat(e.id)))})]})]}):(0,n.jsx)(z,{})})}),(0,n.jsx)(f.Z,{isOpen:o,title:"정말로 삭제하시겠어요?",onDismiss:()=>d(!1),buttons:{left:{text:"취소"},right:{text:"확인",onClick:async()=>{await y(),i()}}}}),(0,n.jsx)(D,{isOpen:u,closeSheet:async()=>{x(!1),await w()},projectId:c,initialTitle:null==j?void 0:j.title,initialDate:{start:null!==(t=null==j?void 0:j.startDate)&&void 0!==t?t:"",end:null!==(s=null==j?void 0:j.endDate)&&void 0!==s?s:""},initialGoal:null==j?void 0:j.goal,initialDescription:null==j?void 0:j.content,reviews:b})]})};let z=()=>(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)("p",{className:"font-body-16 text-text-weak",children:"로딩중..."})});var H=s(39390),I=e=>{let{id:t,title:s,progress:a,onClose:r}=e,[i,c]=(0,l.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"w-full rounded-lg flex items-center justify-between gap-2.5 bg-surface-foreground px-5 py-3 hover:bg-surface-foregroundOn cursor-pointer",onClick:()=>c(!0),children:[(0,n.jsx)("p",{className:"font-body-16 text-text-strong max-w-[53.375rem] text-ellipsis whitespace-nowrap overflow-hidden",title:s,children:s}),(0,n.jsx)(H.Z,{percentage:a})]},t),(0,n.jsx)(P,{projectId:t,isOpen:i,closeSheet:()=>{null==r||r(),c(!1)}})]})};function M(){let[e,t]=(0,l.useState)([]);(0,l.useEffect)(()=>{s()},[]);let s=async()=>{let{projects:e}=await (0,a.ku)();t(e)};return(0,n.jsxs)("div",{className:"w-[60rem]",children:[(0,n.jsx)(c,{fetchProjects:s}),(0,n.jsx)("div",{className:"w-full flex flex-col gap-3",children:e.length>0?(0,n.jsx)(n.Fragment,{children:e.map(e=>(0,n.jsx)(I,{id:e.id,title:e.title,progress:e.progress,onClose:s},e.id))}):(0,n.jsx)(u,{})})]})}},31407:function(e,t,s){"use strict";s.d(t,{H:function(){return n}});let n=(e,t)=>{let s=t.weekNumber.year-e.weekNumber.year,n=t.weekNumber.month-e.weekNumber.month,l=t.weekNumber.week-e.weekNumber.week;return s||n||l}}},function(e){e.O(0,[568,890,38,97,892,569,53,282,366,400,744],function(){return e(e.s=60933)}),_N_E=e.O()}]);