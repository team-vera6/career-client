(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[192],{60933:function(e,t,s){Promise.resolve().then(s.bind(s,93744))},12507:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var l=s(72330),n=s.n(l)},72330:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return i}});let l=s(3397),n=s(90052),a=s(14569),r=l._(s(45074));function i(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:r.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=a.Image},71152:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return l}});let l=s(3397)._(s(28823)).default.createContext(null)},93744:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return L}});var l=s(47586),n=s(28823),a=s(54752),r=s(4979),i=s(57882),c=()=>{let[e,t]=(0,n.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full flex items-center justify-between mb-[1.875rem]",children:[(0,l.jsx)("p",{className:"font-head-20 text-text-strong",children:"프로젝트"}),(0,l.jsxs)("button",{className:"button-primary button-medium",onClick:()=>t(!0),children:[(0,l.jsx)(i.Z,{size:20,stroke:"#fff"}),(0,l.jsx)("p",{className:"font-body-14 text-text-invert",children:"추가"})]})]}),(0,l.jsx)(r.Z,{isOpen:e,closeSheet:()=>t(!1)})]})},o=s(12507),d={src:"/_next/static/media/project-empty.93d3d496.png",height:100,width:100,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEVMaXGYmaKZm6GZm6CWm6GYnKCurrmZnKCZnZ93kOB2AAAACXRSTlMAFGCAKrcHozskKa1AAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMUlEQVR4nB2IQQ4AMAiDaKtz/3/x4i5AADjYIGscQ3XivkKVzO2CtHwASktA4o+N9QMViwB/v+xSgAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},x=()=>(0,l.jsxs)("div",{className:"w-full flex items-center justify-center flex-col gap-10 mt-[5.625rem]",children:[(0,l.jsx)("p",{className:"font-body-16 text-text-normal",children:"새로운 프로젝트를 추가해 보세요!"}),(0,l.jsx)(o.default,{src:d,alt:"no project",width:100,height:100})]}),u=s(18775);let m=async e=>await (0,u.GZ)("/projects/".concat(e));var f=s(22668),h=s(31407),p=s(51e3);let g=async(e,t)=>await (0,u.vx)("/projects/".concat(e),t);var j=s(58389),b=s(86156),v=s(81932),w=s(73025),N=s(29335),A=e=>{let{size:t=16,stroke:s="#999CA1",...n}=e;return(0,l.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:(0,l.jsx)("path",{d:"M6 3L12 8L6 13",stroke:s,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},y=s(63278),k=s(80044),S=s(41778),C=e=>{let{className:t}=e;return(0,l.jsx)("span",{className:(0,S.cn)("w-0 h-[3.75rem] border-l border-line-normalHover",t)})},Z=e=>{let{type:t,review:s,week:n,last:a}=e;return(0,l.jsxs)("div",{className:"flex gap-4 h-[5.375rem] relative",children:["highlight"===t?(0,l.jsx)(y.Z,{size:24,className:"mt-2"}):(0,l.jsx)(k.Z,{size:24,className:"mt-2"}),!a&&(0,l.jsx)(C,{className:"absolute left-2.5 top-10"}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("div",{className:"mb-1 border border-line-assistive bg-surface-foreground rounded-lg p-3",children:(0,l.jsx)("p",{className:"font-body-14 text-text-strong line-clamp-2",children:s})}),(0,l.jsxs)("div",{className:"flex items-center gap-0.5 justify-end",children:[(0,l.jsx)("p",{className:"font-body-13 text-text-strong",children:"".concat(n.month,"월 ").concat(n.week,"주차")}),(0,l.jsx)(A,{size:16})]})]})]})},O=e=>{let{isOpen:t,closeSheet:s,projectId:a,initialTitle:r,initialDate:i,initialGoal:c,initialDescription:o,reviews:d}=e,{addToast:x}=(0,N.Z)(),[u,m]=(0,n.useState)(""),[h,A]=(0,n.useState)({start:"",end:""}),[y,k]=(0,n.useState)(""),[S,C]=(0,n.useState)(""),[O,D]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&(m(null!=r?r:""),A(null!=i?i:{start:"",end:""}),k(null!=c?c:""),C(null!=o?o:""),k(null!=c?c:""))},[t,r,i,c,o]);let _=async()=>{let e={title:u,startDate:h.start,endDate:h.end,goal:y,content:S};try{await g(a,e),x({message:"프로젝트 내용이 수정되었어요.",iconType:"success"}),s()}catch(e){x({message:"프로젝트 수정에 실패했어요. 다시 시도해주세요.",iconType:"error"})}};return(0,l.jsxs)(p.Z,{isOpen:t,closeActionSheet:()=>D(!0),buttons:[{text:"저장",onClick:_}],children:[(0,l.jsx)(v.Z,{placeholder:"프로젝트 이름",className:"!font-bold",value:u,onChange:e=>m(e.currentTarget.value),id:String(a)}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 mb-6 mt-3",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal",children:"기간"}),(0,l.jsx)(j.Z,{date:h,setDate:A})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal",children:"목표"}),(0,l.jsx)(b.Z,{placeholder:"목표를 입력해주세요",maxLength:50,value:y,onChange:e=>k(e.currentTarget.value)})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal",children:"내용"}),(0,l.jsx)(w.Z,{placeholder:"내용을 입력해주세요",maxLength:160,className:"h-[9.6875rem]",value:S,onChange:e=>C(e)})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-5 font-title-16 text-text-strong",children:"연관된 회고"}),(0,l.jsx)("div",{className:"flex flex-col gap-3",children:null==d?void 0:d.map(e=>(0,l.jsx)(Z,{type:e.type,review:e.content,week:e.weekNumber,last:e===d[d.length-1]},e.id))})]}),(0,l.jsx)(f.Z,{isOpen:O,onDismiss:()=>D(!1),title:"변경사항을 저장하지 않고 나가시겠어요?",buttons:{left:{text:"취소"},right:{text:"확인",onClick:s}}})]})},D=e=>{let{title:t,content:s}=e;return(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("p",{className:"font-body-14 text-text-normal shrink-0",children:t}),(0,l.jsx)("p",{className:"font-body-14 text-text-strong",children:s})]})},_=e=>{let{percentage:t}=e;return(0,l.jsx)("div",{className:"w-full bg-surface-background rounded relative h-1.5",children:(0,l.jsx)("div",{className:"absolute left-0 top-0 bottom-0 h-1.5 rounded bg-surface-normal",style:{width:"".concat(t,"%")}})})},E=e=>{let{startDate:t,endDate:s,percentage:n}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"font-body-14 text-text-strong",children:[t," - ",s]}),(0,l.jsxs)("p",{className:"font-body-14 text-text-primary",children:[n,"%"]})]}),(0,l.jsx)(_,{percentage:n})]})},z=e=>{var t,s;let{isOpen:r,closeSheet:i,projectId:c}=e,[o,d]=(0,n.useState)(!1),[x,u]=(0,n.useState)(!1),[g,j]=(0,n.useState)(),[b,v]=(0,n.useState)([]),w=(0,n.useCallback)(async()=>{let e=await (0,a.e5)(c);j(e),v(N(e.highlights,e.lowlights))},[c]);(0,n.useEffect)(()=>{r&&w()},[r,w]);let N=(e,t)=>{let s=[...e.map(e=>({...e,type:"highlight"})),...t.map(e=>({...e,type:"lowlight"}))];return s.sort(h.H),s},A=async()=>{try{await m(c)}catch(e){console.error("fail to delete project",e)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.Z,{isOpen:r,closeActionSheet:i,buttons:[{text:"삭제",buttonStyle:"line",onClick:()=>d(!0)},{text:"수정",buttonStyle:"line",onClick:()=>u(!0)}],children:(0,l.jsx)(l.Fragment,{children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"font-head-24 text-text-strong mb-4",children:g.title}),(0,l.jsx)(E,{startDate:g.startDate,endDate:g.endDate,percentage:g.progress}),(0,l.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,l.jsx)(D,{title:"목표",content:g.goal}),(0,l.jsx)(D,{title:"내용",content:g.content})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-5 font-title-16 text-text-strong",children:"연관된 회고"}),(0,l.jsx)("div",{className:"flex flex-col gap-3",children:b.map(e=>(0,l.jsx)(Z,{type:e.type,review:e.content,week:e.weekNumber,last:e===b[b.length-1]},"".concat(e.type,"-").concat(e.id)))})]})]}):(0,l.jsx)(M,{})})}),(0,l.jsx)(f.Z,{isOpen:o,title:"정말로 삭제하시겠어요?",onDismiss:()=>d(!1),buttons:{left:{text:"취소"},right:{text:"확인",onClick:async()=>{await A(),i()}}}}),(0,l.jsx)(O,{isOpen:x,closeSheet:async()=>{u(!1),await w()},projectId:c,initialTitle:null==g?void 0:g.title,initialDate:{start:null!==(t=null==g?void 0:g.startDate)&&void 0!==t?t:"",end:null!==(s=null==g?void 0:g.endDate)&&void 0!==s?s:""},initialGoal:null==g?void 0:g.goal,initialDescription:null==g?void 0:g.content,reviews:b})]})};let M=()=>(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)("p",{className:"font-body-16 text-text-weak",children:"로딩중..."})});var G=s(39390),I=e=>{let{id:t,title:s,progress:a,onClose:r}=e,[i,c]=(0,n.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full rounded-lg flex items-center justify-between gap-2.5 bg-surface-foreground px-5 py-3 hover:bg-surface-foregroundOn cursor-pointer",onClick:()=>c(!0),children:[(0,l.jsx)("p",{className:"font-body-16 text-text-strong max-w-[53.375rem] text-ellipsis whitespace-nowrap overflow-hidden",title:s,children:s}),(0,l.jsx)(G.Z,{percentage:a})]},t),(0,l.jsx)(z,{projectId:t,isOpen:i,closeSheet:()=>{null==r||r(),c(!1)}})]})};function L(){let[e,t]=(0,n.useState)([]);(0,n.useEffect)(()=>{s()},[]);let s=async()=>{let{projects:e}=await (0,a.ku)();t(e)};return(0,l.jsxs)("div",{className:"w-[60rem]",children:[(0,l.jsx)(c,{}),(0,l.jsx)("div",{className:"w-full flex flex-col gap-3",children:e.length>0?(0,l.jsx)(l.Fragment,{children:e.map(e=>(0,l.jsx)(I,{id:e.id,title:e.title,progress:e.progress,onClose:s},e.id))}):(0,l.jsx)(x,{})})]})}},31407:function(e,t,s){"use strict";s.d(t,{H:function(){return l}});let l=(e,t)=>{let s=t.weekNumber.year-e.weekNumber.year,l=t.weekNumber.month-e.weekNumber.month,n=t.weekNumber.week-e.weekNumber.week;return s||l||n}}},function(e){e.O(0,[568,890,38,97,569,504,999,490,366,400,744],function(){return e(e.s=60933)}),_N_E=e.O()}]);